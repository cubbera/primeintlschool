<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Tuition Proration & Refund Calculator</title>

<style>
body{
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial;
  background:#f6f7fb;
  padding:24px;
  line-height:1.6;
}
h2,h3{margin-top:0}
label{font-weight:600}
input{
  padding:8px 10px;
  font-size:14px;
  margin:4px 0 12px;
  width:280px;
}
.discount{
  color:#b91c1c;
  font-weight:700;
}
.output{
  font-weight:700;
  margin-left:6px;
}
.card{
  background:#fff;
  border:1px solid #ccc;
  border-radius:10px;
  padding:16px;
  margin-top:16px;
}
button{
  padding:10px 18px;
  font-size:14px;
  border:none;
  border-radius:8px;
  background:#111;
  color:#fff;
  cursor:pointer;
  margin:10px 0;
}
.month{
  padding:6px 10px;
  color:#fff;
  border-radius:6px;
  display:inline-block;
  margin:3px;
  font-size:13px;
}
.t1{background:#2563eb}
.t2{background:#059669}
.t3{background:#9333ea}
</style>
</head>

<body>

<h2>Tuition Proration & Refund Calculator</h2>

<label>BASE tuition fee</label><br>
<input id="baseFee" placeholder="10,000,000"><br>

<label>Join date</label><br>
<input type="date" id="joinDate">
<span class="output" id="joinTerm"></span><br>

<label>Tuition Fee before discount (AFTER PRORATE)</label>
<span class="output" id="proratedFee"></span><br><br>

<label>Discount #1</label><br>
<input id="disc1" class="discount" placeholder="-100,000"><br>

<label>Discount #2</label><br>
<input id="disc2" class="discount" placeholder="-50,000"><br>

<button onclick="calcFinal()">Calculate Final Amount</button><br>

<label>FINAL Tuition Fee after discount</label>
<span class="output" id="finalFee"></span><br><br>

<label>Leave date</label><br>
<input type="date" id="leaveDate">
<span class="output" id="leaveTerm"></span><br>

<button onclick="calcRefund()">Calculate Refund</button>

<div class="card">
  <h3>Result</h3>
  Refundable amount:
  <span class="output" id="refundAmount"></span><br>
  Refundable term (total month):
  <span class="output" id="refundMonths"></span>
</div>

<div class="card">
<h3>Term Calendar Reference</h3>

<strong>AY2025–2026</strong><br>
<span class="month t1">Jun 25</span>
<span class="month t1">Jul</span>
<span class="month t1">Aug</span>
<span class="month t2">Sep</span>
<span class="month t2">Oct</span>
<span class="month t2">Nov</span>
<span class="month t3">Dec</span>
<span class="month t3">Jan 26</span>
<span class="month t3">Feb</span>
<span class="month t3">Mar</span>
<span class="month t3">Apr</span>
<span class="month t3">May</span>

<br><br>

<strong>AY2026–2027</strong><br>
<span class="month t1">Jun 26</span>
<span class="month t1">Jul</span>
<span class="month t1">Aug</span>
<span class="month t2">Sep</span>
<span class="month t2">Oct</span>
<span class="month t2">Nov</span>
<span class="month t3">Dec</span>
<span class="month t3">Jan 27</span>
<span class="month t3">Feb</span>
<span class="month t3">Mar</span>
<span class="month t3">Apr</span>
<span class="month t3">May</span>
</div>

<script>
const TERMS = {
  "2025": [
    {t:"T1",s:"2025-06-10",e:"2025-08-29",m:3},
    {t:"T2",s:"2025-09-01",e:"2025-11-28",m:3},
    {t:"T3",s:"2025-12-01",e:"2026-04-03",m:4}
  ],
  "2026": [
    {t:"T1",s:"2026-06-16",e:"2026-09-04",m:3},
    {t:"T2",s:"2026-09-07",e:"2026-12-18",m:3},
    {t:"T3",s:"2027-01-05",e:"2027-03-31",m:4}
  ]
};

const money = v => Number(v.replace(/,/g,''))||0;
const fmt = n => n.toLocaleString("en-US");

function findTerm(d){
  for(const ay in TERMS){
    for(const x of TERMS[ay]){
      if(d>=new Date(x.s)&&d<=new Date(x.e))
        return {ay,term:x.t,months:x.m};
    }
  }
  return null;
}

joinDate.onchange=()=>{
  const d=new Date(joinDate.value);
  const r=findTerm(d);
  joinTerm.textContent=r?`AY${r.ay} ${r.term}`:"";
};

leaveDate.onchange=()=>{
  const d=new Date(leaveDate.value);
  const r=findTerm(d);
  leaveTerm.textContent=r?`AY${r.ay} ${r.term}`:"";
};

function calcFinal(){
  const base=money(baseFee.value);
  const monthly=base/10;
  const join=new Date(joinDate.value);
  const used=Math.max(0,join.getMonth()-5);
  const payable=10-used;
  const prorate=payable*monthly;
  proratedFee.textContent=fmt(prorate);

  const final=prorate+money(disc1.value)+money(disc2.value);
  finalFee.textContent=fmt(final);
}

function calcRefund(){
  const base=money(baseFee.value);
  const monthly=base/10;
  const leave=new Date(leaveDate.value);
  const r=findTerm(leave);
  if(!r)return;

  const future=TERMS[r.ay]
    .slice(TERMS[r.ay].findIndex(x=>x.t===r.term)+1)
    .reduce((s,x)=>s+x.m,0);

  refundMonths.textContent=future;
  refundAmount.textContent=fmt(future*monthly);
}
</script>

</body>
</html>
