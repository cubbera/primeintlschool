<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Tuition Proration & Refund</title>

<style>
body{
  font-family: system-ui, Arial;
  font-size:13px;
  background:#f6f7fb;
  padding:20px;
}
label{font-weight:600}
input{
  font-size:13px;
  padding:4px 6px;
  width:200px;
}
.discount{
  color:#b91c1c;
  font-weight:700;
}
.out{
  font-weight:700;
  margin-left:6px;
}
button{
  font-size:13px;
  padding:6px 12px;
  margin:6px 0;
}
.ref{
  background:#fff;
  border:1px solid #ccc;
  padding:12px;
  margin-top:18px;
}
table{
  border-collapse:collapse;
  width:100%;
  font-size:12px;
}
th,td{
  border:1px solid #ccc;
  padding:6px;
  text-align:center;
}
.month{
  display:inline-block;
  padding:4px 6px;
  margin:2px;
  color:#fff;
  border-radius:4px;
}
.t1{background:#2563eb}
.t2{background:#059669}
.t3{background:#9333ea}
</style>
</head>

<body>

<label>BASE tuition fee</label>
<input id="baseFee" placeholder="10,000,000">

<br>

<label>Join date</label>
<input type="date" id="joinDate">
<span class="out" id="joinTerm"></span>

<br>

<label>Tuition Fee before discount (AFTER PRORATE)</label>
<span class="out" id="proratedFee"></span>

<br>

<label>Discount #1</label>
<input id="disc1" class="discount" placeholder="-100,000">

<br>

<label>Discount #2</label>
<input id="disc2" class="discount" placeholder="-50,000">

<br>

<button onclick="calcFinal()">Calculate Final Amount</button>

<label>FINAL Tuition Fee after discount</label>
<span class="out" id="finalFee"></span>

<br><br>

<label>Leave date</label>
<input type="date" id="leaveDate">
<span class="out" id="leaveTerm"></span>

<br>

<button onclick="calcRefund()">Calculate Refund</button>

<br>

<label>Refundable amount</label>
<span class="out" id="refundAmount"></span>

<br>

<label>Refundable term (total month)</label>
<span class="out" id="refundMonths"></span>

<!-- =================== REFERENCE =================== -->

<div class="ref">
<strong>1. Term Calendar (Reference)</strong>

<table>
<tr><th>Academic Year</th><th>Term</th><th>Start</th><th>End</th><th>Months</th></tr>
<tr><td rowspan="3">AY2025-2026</td><td>Term 1</td><td>10-Jun-25</td><td>29-Aug-25</td><td>3</td></tr>
<tr><td>Term 2</td><td>01-Sep-25</td><td>28-Nov-25</td><td>3</td></tr>
<tr><td>Term 3</td><td>01-Dec-25</td><td>03-Apr-26</td><td>4</td></tr>

<tr><td rowspan="3">AY2026-2027</td><td>Term 1</td><td>16-Jun-26</td><td>04-Sep-26</td><td>3</td></tr>
<tr><td>Term 2</td><td>07-Sep-26</td><td>18-Dec-26</td><td>3</td></tr>
<tr><td>Term 3</td><td>05-Jan-27</td><td>31-Mar-27</td><td>4</td></tr>
</table>

<br>

<strong>2. Month View (Color by Term)</strong><br>

<!-- AY2025-2026 -->
<span class="month t1">Jun 25</span>
<span class="month t1">Jul</span>
<span class="month t1">Aug</span>
<span class="month t2">Sep</span>
<span class="month t2">Oct</span>
<span class="month t2">Nov</span>
<span class="month t3">Dec</span>
<span class="month t3">Jan 26</span>
<span class="month t3">Feb</span>
<span class="month t3">Mar</span>
<span class="month t3">Apr</span>
<span class="month t3">May</span>

<br>

<!-- AY2026-2027 -->
<span class="month t1">Jun 26</span>
<span class="month t1">Jul</span>
<span class="month t1">Aug</span>
<span class="month t2">Sep</span>
<span class="month t2">Oct</span>
<span class="month t2">Nov</span>
<span class="month t3">Dec</span>
<span class="month t3">Jan 27</span>
<span class="month t3">Feb</span>
<span class="month t3">Mar</span>
<span class="month t3">Apr</span>
<span class="month t3">May</span>
</div>

<script>
const TERMS={
"AY2025-2026":[
{name:"Term 1",s:"2025-06-10",e:"2025-08-29",m:3},
{name:"Term 2",s:"2025-09-01",e:"2025-11-28",m:3},
{name:"Term 3",s:"2025-12-01",e:"2026-04-03",m:4}
],
"AY2026-2027":[
{name:"Term 1",s:"2026-06-16",e:"2026-09-04",m:3},
{name:"Term 2",s:"2026-09-07",e:"2026-12-18",m:3},
{name:"Term 3",s:"2027-01-05",e:"2027-03-31",m:4}
]
};

const num=v=>Number(v.replace(/,/g,""))||0;
const fmt=n=>n.toLocaleString();

function findTerm(d){
for(const ay in TERMS){
for(const t of TERMS[ay]){
if(d>=new Date(t.s)&&d<=new Date(t.e))
return{ay,term:t.name,months:t.m};
}}
return null;
}

joinDate.onchange=()=>{
const r=findTerm(new Date(joinDate.value));
joinTerm.textContent=r?`${r.ay} ${r.term}`:"";
calcProrate();
};

function calcProrate(){
const base=num(baseFee.value);
const monthly=base/10;
const jm=new Date(joinDate.value).getMonth();
const used=Math.max(0,jm-5);
const pay=(10-used)*monthly;
proratedFee.textContent=fmt(pay);
}

function calcFinal(){
const base=num(proratedFee.textContent||0);
finalFee.textContent=fmt(base+num(disc1.value)+num(disc2.value));
}

leaveDate.onchange=()=>{
const r=findTerm(new Date(leaveDate.value));
leaveTerm.textContent=r?`${r.ay} ${r.term}`:"";
};

function calcRefund(){
const base=num(baseFee.value)/10;
const r=findTerm(new Date(leaveDate.value));
if(!r)return;
const idx=TERMS[r.ay].findIndex(t=>t.name===r.term);
const months=TERMS[r.ay].slice(idx+1).reduce((s,t)=>s+t.m,0);
refundMonths.textContent=months;
refundAmount.textContent=fmt(months*base);
}
</script>

</body>
</html>
