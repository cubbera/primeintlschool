<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Student Enrollment & Tuition Plan</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body {
  font-family: -apple-system, BlinkMacSystemFont, system-ui;
  background:#f5f5f7;
  padding:40px;
}

.container {
  max-width:900px;
  margin:auto;
  background:#fff;
  padding:30px;
  border-radius:12px;
}

h2 {
  margin-top:30px;
  border-bottom:1px solid #ddd;
  padding-bottom:6px;
}

.row {
  display:flex;
  align-items:center;
  margin-top:14px;
  gap:14px;
}

.label {
  width:220px;
  font-weight:600;
}

input, select {
  padding:8px 10px;
  font-size:14px;
  width:260px;
}

.radio-row {
  display:flex;
  gap:40px;
  margin-top:10px;
}

.discount-row {
  display:flex;
  align-items:center;
  gap:14px;
  margin-top:10px;
}

.discount-row select,
.discount-row input {
  width:180px;
}

.amount {
  width:160px;
  text-align:right;
  font-weight:600;
}

.total {
  font-weight:700;
  margin-top:12px;
}

button {
  margin-top:20px;
  padding:14px;
  font-size:16px;
  width:100%;
  background:#059669;
  color:white;
  border:none;
  border-radius:8px;
}
</style>
</head>

<body>
<div class="container">

<h2>1. Enrollment</h2>

<div class="row">
  <div class="label">Academic Year:</div>
  <select id="academicYear" onchange="updateStudentId()">
    <option value="">Select</option>
    <option value="AY25">AY2025–2026</option>
    <option value="SUM26">Summer 2026</option>
    <option value="AY26">AY2026–2027</option>
  </select>
</div>

<div class="radio-row">
  <label><input type="radio" name="studentType" value="new" checked onchange="renderStudentFields()"> New Student</label>
  <label><input type="radio" name="studentType" value="current" onchange="renderStudentFields()"> Current Student</label>
</div>

<div id="studentFields"></div>

<div class="row">
  <div class="label">First Attendance Date:</div>
  <input type="date">
</div>

<div class="row">
  <div class="label">Grade Level:</div>
  <select>
    <option>SR</option><option>EY1</option><option>EY2</option>
    <option>Y1</option><option>Y2</option><option>Y3</option>
  </select>
</div>

<div class="row">
  <div class="label">Payment Plan:</div>
  <select id="paymentPlan" onchange="recalc()">
    <option>Annual</option>
    <option>Termly</option>
    <option selected>Monthly</option>
  </select>
</div>

<h2>2. Calculating Payment</h2>

<div class="row">
  <div class="label">Tuition Before Discount:</div>
  <input id="tuition" type="number" value="5000000" oninput="recalc()">
</div>

<div id="discounts"></div>

<button type="button" onclick="addDiscount()">+ Add Discount</button>

<div class="total">Total Discount: <span id="totalDiscount">0</span></div>
<div class="total">Amount After Discount: <span id="afterDiscount">0</span></div>
<div class="b></b>

<div class="total">Monthly Fee (10x): <span id="monthlyFee">0</span></div>

<h2>3. Tuition Payment Plan</h2>

<table width="100%" cellpadding="6">
<tr><th>Payment No</th><th>Due Date</th><th>Amount</th></tr>
<tbody id="planBody"></tbody>
</table>

<button>Add Student & Create Payment Plan</button>

<p style="margin-top:10px;font-size:13px;color:#555">
By clicking, we will create new student, payment plan, and then go to payment (creating payment receipt) page.
</p>

</div>

<script>
function renderStudentFields() {
  const type = document.querySelector('input[name="studentType"]:checked').value;
  const year = document.getElementById("academicYear").value;
  const box = document.getElementById("studentFields");
  box.innerHTML = "";

  if (type === "new") {
    if (!year) return;
    const id = year === "AY25" ? "PR25142" : "PR26012";
    box.innerHTML = `
      <div class="row">
        <div class="label">Student ID:</div>
        <input value="${id}" readonly>
      </div>`;
  } else {
    box.innerHTML = `
      <div class="row">
        <div class="label">Student Name:</div>
        <input>
      </div>
      <div class="row">
        <div class="label">Student ID:</div>
        <input>
      </div>`;
  }
}

function updateStudentId() {
  renderStudentFields();
}

function addDiscount() {
  const d = document.createElement("div");
  d.className = "discount-row";
  d.innerHTML = `
    <select onchange="recalc()">
      <option value="">Select</option>
      <option value="fixed">Fixed Amount</option>
      <option value="percent">Percentage</option>
    </select>
    <input type="number" placeholder="Value" oninput="recalc()">
    <div class="amount">0</div>`;
  document.getElementById("discounts").appendChild(d);
}

function recalc() {
  const tuition = Number(document.getElementById("tuition").value || 0);
  let totalDiscount = 0;

  document.querySelectorAll(".discount-row").forEach(r => {
    const type = r.children[0].value;
    const val = Number(r.children[1].value || 0);
    let d = 0;
    if (type === "fixed") d = val;
    if (type === "percent") d = tuition * val / 100;
    r.children[2].textContent = "-" + d.toLocaleString();
    totalDiscount += d;
  });

  const net = tuition - totalDiscount;
  document.getElementById("totalDiscount").textContent = "-" + totalDiscount.toLocaleString();
  document.getElementById("afterDiscount").textContent = net.toLocaleString();
  document.getElementById("monthlyFee").textContent = Math.round(net / 10).toLocaleString();

  const body = document.getElementById("planBody");
  body.innerHTML = "";
  for (let i = 1; i <= 10; i++) {
    body.innerHTML += `<tr><td>${i}</td><td>${i === 1 ? "Registration" : "Month " + i}</td><td>${Math.round(net/10).toLocaleString()}</td></tr>`;
  }
}

recalc();
</script>
</body>
</html>
