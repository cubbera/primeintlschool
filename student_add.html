<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Student Enrollment & Tuition Plan</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  font-family:-apple-system,BlinkMacSystemFont,system-ui;
  background:#f5f5f7;
  padding:24px;
}
.container{
  max-width:1100px;
  margin:auto;
  background:#fff;
  padding:32px;
  border-radius:14px;
}
h2{
  margin-top:32px;
  border-bottom:1px solid #ddd;
  padding-bottom:6px;
}
.row{
  display:flex;
  align-items:center;
  gap:16px;
  margin-top:14px;
  flex-wrap:wrap;
}
.label{
  min-width:220px;
  font-weight:600;
  color:#111;
}
.value{
  font-weight:600;
}
input,select{
  padding:8px 10px;
  font-size:14px;
  min-width:240px;
}
.radio-row{
  display:flex;
  gap:40px;
  margin-top:16px;
}
.student-id-badge{
  background:#e0f2fe;
  color:#0369a1;
  padding:6px 14px;
  border-radius:999px;
  font-weight:700;
}
.discount-header,.discount-row{
  display:grid;
  grid-template-columns:70px 200px 160px 160px 160px 40px;
  gap:10px;
  align-items:center;
}
.discount-header{
  font-weight:700;
  margin-top:18px;
}
.discount-row{
  margin-top:8px;
}
.red{color:#b91c1c;font-weight:700;}
.amount{
  text-align:right;
  font-weight:700;
}
.remove{
  cursor:pointer;
  font-size:20px;
  color:#991b1b;
}
.add-discount{
  margin-top:14px;
  padding:8px 14px;
  background:#e5e7eb;
  border:none;
  border-radius:8px;
  cursor:pointer;
}
.total{
  margin-top:12px;
  font-weight:700;
}
.primary-btn{
  margin-top:32px;
  padding:18px;
  width:100%;
  font-size:16px;
  background:#2563eb;
  color:white;
  border:none;
  border-radius:10px;
}
table{
  width:100%;
  margin-top:14px;
  border-collapse:collapse;
}
th,td{
  padding:8px;
  border-bottom:1px solid #eee;
  text-align:center;
}
@media(max-width:900px){
  .discount-header,.discount-row{
    grid-template-columns:1fr;
  }
}
</style>
</head>

<body>
<div class="container">

<h2>1. Enrollment</h2>

<div class="row">
  <div class="label">Academic Year:</div>
  <select id="academicYear" onchange="updateAll()">
    <option value="AY25">AY2025–2026</option>
    <option value="SUM26">Summer 2026</option>
    <option value="AY26">AY2026–2027</option>
  </select>
</div>

<div class="radio-row">
  <label><input type="radio" name="studentType" value="new" checked onchange="renderStudent()"> New Student</label>
  <label><input type="radio" name="studentType" value="current" onchange="renderStudent()"> Current Student</label>
</div>

<div id="studentFields"></div>

<div class="row">
  <div class="label">First Attendance Date:</div>
  <input type="date" id="attendance">
</div>

<div class="row">
  <div class="label">Grade Level:</div>
  <select id="grade" onchange="updateAll()">
    <option>SR</option><option>EY1</option><option>EY2</option>
    <option>Y1</option><option>Y2</option><option>Y3</option>
  </select>
</div>

<div class="row">
  <div class="label">Payment Plan:</div>
  <select id="plan" onchange="updateAll()">
    <option>Annual</option>
    <option>Termly</option>
    <option selected>Monthly</option>
  </select>
</div>

<h2>2. Calculating Payment</h2>

<div class="row">
  <div class="label">Tuition Before Discount:</div>
  <div class="value" id="tuition">0</div>
</div>

<div class="discount-header">
  <div>#</div>
  <div>Type</div>
  <div>Value</div>
  <div>Discount</div>
  <div>After</div>
  <div></div>
</div>

<div id="discounts"></div>

<button class="add-discount" onclick="addDiscount()">+ Add Discount</button>

<div class="total red">Total Discount: <span id="totalDiscount">0</span></div>
<div class="total">Amount After Discount: <span id="afterDiscount">0</span></div>
<div class="total">Monthly Fee (10x): <span id="monthlyFee">0</span></div>

<h2>3. Tuition Payment Plan</h2>

<table>
<thead>
<tr><th>No</th><th>Due Date</th><th>Amount</th></tr>
</thead>
<tbody id="planBody"></tbody>
</table>

<button class="primary-btn">Add Student & Create Payment Plan</button>

<p style="margin-top:12px;font-size:13px;color:#555">
By clicking, we will create new student, payment plan, and then go to payment (creating payment receipt) page.
</p>

</div>

<script>
const pricing={
 AY25:{SR:{Annual:2700000,Termly:3000000,Monthly:3000000},
       EY1:{Annual:3900000,Termly:4200000,Monthly:4200000},
       EY2:{Annual:3900000,Termly:4200000,Monthly:4200000},
       Y1:{Annual:4200000,Termly:4500000,Monthly:4500000},
       Y2:{Annual:4200000,Termly:4500000,Monthly:4500000},
       Y3:{Annual:4200000,Termly:4500000,Monthly:4500000}},
 AY26:{SR:{Annual:2890000,Termly:3090000,Monthly:3290000},
       EY1:{Annual:4290000,Termly:4490000,Monthly:4890000},
       EY2:{Annual:4290000,Termly:4490000,Monthly:4890000},
       Y1:{Annual:4690000,Termly:4890000,Monthly:5290000},
       Y2:{Annual:4690000,Termly:4890000,Monthly:5290000},
       Y3:{Annual:4690000,Termly:4890000,Monthly:5290000}},
 SUM26:{ALL:{Annual:850000,Termly:850000,Monthly:850000}}
};

let discounts=[];

attendance.value=new Date().toISOString().slice(0,10);

function renderStudent(){
 const type=document.querySelector('input[name="studentType"]:checked').value;
 const year=academicYear.value;
 studentFields.innerHTML="";
 if(type==="new"){
   const id=year==="AY25"?"PR25142":"PR26012";
   studentFields.innerHTML=`
     <div class="row">
       <div class="label">Student ID:</div>
       <div class="student-id-badge">${id}</div>
     </div>`;
 }else{
   studentFields.innerHTML=`
     <div class="row"><div class="label">Student Name:</div><input></div>
     <div class="row"><div class="label">Student ID:</div><input></div>`;
 }
}

function addDiscount(){
 discounts.push({type:"fixed",value:0});
 recalc();
}

function recalc(){
 const y=academicYear.value,g=grade.value,p=plan.value;
 const base=y==="SUM26"?pricing.SUM26.ALL[p]:pricing[y][g][p];
 tuition.textContent=base.toLocaleString();

 let fixed=0,percent=[];
 discounts.forEach(d=>{
   if(d.type==="percent") percent.push(d);
   else fixed+=d.value;
 });
 let after=base-fixed;
 let percentDisc=0;
 percent.forEach(d=>percentDisc+=after*d.value/100);
 let total=fixed+percentDisc;
 after=base-total;

 totalDiscount.textContent="-"+Math.round(total).toLocaleString();
 afterDiscount.textContent=Math.round(after).toLocaleString();
 monthlyFee.textContent=Math.round(after/10).toLocaleString();

 planBody.innerHTML="";
 for(let i=1;i<=10;i++){
  planBody.innerHTML+=`<tr><td>${i}</td><td>${i===1?"Registration":"Month "+i}</td><td>${Math.round(after/10).toLocaleString()}</td></tr>`;
 }
}

function updateAll(){
 renderStudent();
 recalc();
}

updateAll();
</script>
</body>
</html>
